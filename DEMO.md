# 🎬 Демонстрация Contest Auction

Проект для конкурса: Production-ready многораундовая аукционная система.

## 📺 Демо-материалы

### Видео (3-5 минут)
https://youtu.be/Z4OW_gKjAgo

**Что показано в видео:**
- ✅ Запуск проекта одной командой
- ✅ Создание аукциона через UI
- ✅ Автоматические ставки от ботов
- ✅ Переход между раундами
- ✅ Определение победителей
- ✅ Проверка балансов и транзакций
- ✅ Финансовая надёжность системы

### 🌐 Работающий сайт
https://auction-production-cfa9.up.railway.app/



### 📂 Исходный код
**GitHub:** [Текущий репозиторий]

---

## 🚀 Быстрый старт (для жюри)

### Вариант 1: Полный Docker (рекомендуется)

Запустить весь стек одной командой:

```bash
docker compose -f docker-compose.full.yml up --build
```

После запуска:
- **UI:** http://localhost:3000
- **API:** http://localhost:3000/api
- **MongoDB UI:** http://localhost:8081
- **Метрики:** http://localhost:3000/metrics

Создать демо-данные:

```bash
npm run seed:demo
```

### Вариант 2: Локальный запуск

1. Запустить MongoDB:
```bash
docker compose up -d
```

2. Установить зависимости:
```bash
npm install
```

3. Запустить все сервисы:
```bash
npm run start:all
```

4. Создать демо-данные:
```bash
npm run seed:demo
```

5. Открыть UI: http://localhost:3000

---

## 🎯 Основные возможности

### Финансовая надёжность
- **Hold/Release/Capture** модель — безопасная работа со ставками
- **Reconcile Worker** — автоматическая проверка и исправление инвариантов
- **Compensating Transactions** — восстановление после ошибок
- **MongoDB транзакции** — атомарность операций
- **Optimistic Locking** — retry механизм для конкуренции

### Механика аукционов
- **Multi-round** — постепенный отсев участников
- **Multi-lot** — несколько призов в одном аукционе
- **Anti-sniping** — защита от ставок в последнюю секунду
- **Tie-breaking** — честная конкуренция при равных ставках
- **Автоучастники** — боты для демонстрации

### Надёжность
- **55 тестов** — покрытие критических сценариев
- **Prometheus метрики** — мониторинг
- **Structured logs** — JSON логирование
- **Health checks** — проверка состояния сервисов

---

## 📊 Архитектура

```
┌─────────────────────────────────────────────────┐
│                   User / UI                     │
│           http://localhost:3000                 │
└────────────────────┬────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────┐
│               API Server (Fastify)              │
│    • REST API                                   │
│    • Static files                               │
│    • Metrics (Prometheus)                       │
└────────────┬────────────────────┬────────────────┘
             │                    │
   ┌─────────▼─────────┐  ┌──────▼──────────┐
   │   Worker          │  │  Reconcile      │
   │   • Close rounds  │  │  • Check holds  │
   │   • Finalize      │  │  • Auto-fix     │
   └────────┬──────────┘  └──────┬──────────┘
            │                    │
   ┌────────▼────────────────────▼─────────┐
   │        MongoDB Replica Set            │
   │    • Transactions                     │
   │    • Accounts, Auctions, Bids         │
   │    • Ledger, Outbox, Issues           │
   └───────────────────────────────────────┘
```

---

## 🔧 Технологии

- **Node.js 18+** + **TypeScript**
- **Fastify** — быстрый web-фреймворк
- **MongoDB 7** — база данных с транзакциями
- **Mongoose** — ODM
- **Decimal.js** — точные финансовые вычисления
- **Vitest** — тестирование (55 тестов)
- **Prometheus** — метрики
- **Docker** — контейнеризация

---

## 📈 Производительность

**Load test результаты (k6):**
- 20-50 одновременных пользователей
- 60 секунд нагрузки
- Anti-sniping тестирование
- Конкурентные ставки

Команда для запуска:
```bash
npm run load
```

---

## 📝 Документация

- [`README.md`](README.md) — полная документация
- [`docs/API.md`](docs/API.md) — описание API
- [`docs/spec.md`](docs/spec.md) — спецификация механики
- [`docs/AUDIT_GUIDE.md`](docs/AUDIT_GUIDE.md) — гайд по аудиту

---

## 🎯 Highlights для жюри

1. **Enterprise-grade финансовая логика**
   - Нет потери денег пользователей
   - Автоматическое исправление проблем
   - Полный аудит trail в Ledger

2. **Production-ready качество**
   - 55 автотестов
   - Метрики и мониторинг
   - Health checks
   - Graceful shutdown

3. **Простота запуска**
   - Одна команда для полного стека
   - Docker compose готов
   - Автоматические демо-данные

4. **Масштабируемость**
   - Stateless API (можно горизонтально масштабировать)
   - Отдельные воркеры
   - Идемпотентные операции

5. **Современный UI**
   - Mobile-first дизайн
   - Тёмная тема
   - Real-time обновления
   - Полностью на русском

---

**Спасибо за внимание к проекту!** 🚀
